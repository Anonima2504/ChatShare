<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAI Library</title>
    <style type="text/css">
        /* Themes */
        :root {
            --body-bg: #f5f8fa;
            --border-color: #efefef;
            --messagebox-bg: #ffffff;
            --messagebox-shadow: rgba(0, 0, 0, 0.1);
            --font-color: #1f1f1f;
            --rgba-1: rgba(0, 0, 0, 0.05);
            --rgba-2: rgba(0, 0, 0, 0.1);
        }

        .dark_mode {
            --body-bg: #343434;
            --border-color: #4f4f4f;
            --messagebox-bg: #474747;
            --messagebox-shadow: rgba(0, 0, 0, 0);
            --font-color: #ededed;
            --rgba-1: rgba(255, 255, 255, 0.06);
            --rgba-2: rgba(255, 255, 255, 0.2);
        }



        * {
            box-sizing: border-box;
        }

        button,
        select,
        img {
            user-select: none;
        }

        ol,
        ul,
        li,
        a,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            text-decoration: none;
            margin: 0;
            padding: 0;
        }

        .italic {
            font-style: italic;
        }

        .bold {
            font-weight: bold;
        }

        .bold-italic {
            font-weight: bold;
            font-style: italic;
        }

        html {
            font-size: 14px;
        }

        body {
            padding: 0;
            margin: 0;
            background-color: var(--body-bg);
            color: var(--font-color);
        }

        .content-cont {
            display: flex;
            flex-direction: row;
        }


        /* NAV / Drawer */

        @keyframes slideIn {
            0% {
                opacity: 0;
                left: -200px;
            }

            100% {
                opacity: 1;
                left: 0;
            }
        }

        .drawer-cont.active {
            display: block;
        }

        .drawer-cont {
            display: none;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
        }

        nav {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            max-width: 80%;
            background-color: var(--body-bg);

            display: flex;
            flex-direction: column;
            padding: 10px 0;
            overflow: hidden;
            animation: slideIn 0.2s ease-in-out;
            -webkit-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
        }

        .nav-header {
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 0 10px 0 20px;
            margin-bottom: 20px;
            gap: 10px;
        }

        .close_drawer-btn {
            align-self: flex-end;
            padding: 10px;
            transition: background-color 0.1s ease-in-out;
            cursor: pointer;
            border-radius: 8px;
        }

        .close_drawer-btn:hover {
            background-color: var(--rgba-1);
        }

        .close_drawer-btn svg {
            display: flex;
            width: 30px;
            height: 30px;
            color: var(--font-color);
        }

        /*.nav-new_char-btn {
            align-self: flex-start;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            background-color: #4e9733;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .nav-new_char-btn:hover {
            background-color: #6ba755;
        }*/

        .history_list-header {
            font-size: 1.5rem;
            padding: 10px 20px;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            margin-bottom: 10px;
        }

        .history_list {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .history_item {
            transition: background-color 0.1s ease-in-out;
            padding: 20px 30px 20px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--rgba-2);
        }

        .history_item:first-child {
            border-top: 1px solid var(--rgba-2);
        }

        .history_item:hover {
            background-color: var(--rgba-1);
        }

        .history_item p {
            font-family: Arial, Helvetica, sans-serif;
        }

        .history_item p .chat-date {
            font-style: italic;
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        /*nav .char-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;
            transition: background-color 0.1s ease-in-out;
            padding: 10px 40px 10px 20px;
            cursor: pointer;
        }

        nav .char-item:hover {
            background-color: var(--rgba-1);
        }

        nav .nav-avatar-wrap {
            width: 40px;
            height: 40px;
        }

        nav .nav-avatar-wrap img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        nav .char-item span {
            font-size: 1.3rem;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        }*/

        /* MAIN */
        main {
            display: flex;
            flex-direction: column;
            padding: 0 4%;
            width: 100%;
        }

        /* HEADER */
        header {
            padding: 6px 6px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
        }

        .open_drawer-wrap svg {
            display: flex;
            width: 46px;
            height: 46px;
            color: var(--font-color);
        }


        .theme_switch {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .theme_switch span {
            font-size: 1.1rem;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .tswitch_box[type=checkbox] {
            height: 0;
            width: 0;
            visibility: hidden;
            position: absolute;
        }

        .tswitch_label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            display: block;
            border-radius: 15px;
            position: relative;
            border: 1px solid #323232;
            background: #f5f8fa;
        }

        .tswitch_label:after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50px;
            transition: 0.2s;
            background: #323232;
        }

        .tswitch_box:checked+label {
            background: #323232;
            border: 1px solid #f5f8fa;
        }

        .tswitch_box:checked+label:after {
            left: calc(100% - 5px);
            transform: translateX(-100%);
            background: #f5f8fa;
        }

        .tswitch_label:active:after {
            width: 25px;
        }

        /*.update_current_char-btn {
            margin-left: auto;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1rem;
            align-self: center;
            cursor: pointer;
            background-color: #336c97;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .update_current_char-btn:hover {
            background-color: #5f829d;
        }*/


        /* CONVERSATION */
        .character_name-cont {
            text-align: center;
            padding: 20px 10px;
        }

        .character_name-cont h3 {
            font-size: 1.3rem;
            font-weight: 400;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .chat {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-self: center;
            padding-bottom: 30px;
        }

        .chat_message-item {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 10px;
        }

        .chat .avatar-wrap {
            flex-shrink: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .avatar-wrap>* {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .chat .avatar-wrap .no_avatar-user {
            background-color: #5157cf;
        }

        .chat .avatar-wrap .no_avatar-char {
            background-color: #e20909;
        }

        .chat .chat_content-wrap {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 7px;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 4px var(--messagebox-shadow);
            background-color: var(--messagebox-bg);
            overflow: hidden;
        }

        .chat .chat_content-wrap h5 {
            font-size: 1rem;
            font-weight: bold;
            font-family: Arial, Helvetica, sans-serif;
        }

        .chat .chat_content-wrap .message-wrap {
            font-size: 1rem;
            font-family: Arial, Helvetica, sans-serif;
        }


        @media (min-width: 576px) {}

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }

            nav {
                min-width: 40%;
            }

            header {
                padding: 14px 20px;
            }

            .open_drawer-wrap {
                padding: 4px;
                cursor: pointer;
                border-radius: 6px;
                transition: background-color 0.1s ease-in-out;
            }

            .open_drawer-wrap:hover {
                background-color: var(--rgba-1);
            }

            .chat {
                width: 80%;
            }

            .chat .chat_content-wrap {
                padding: 14px;
            }
        }

        @media (min-width: 992px) {
            .chat {
                width: 70%;
            }
        }

        @media (min-width: 1200px) {}

        @media (min-width: 1400px) {}
    </style>
</head>

<body>
    <template id="message_item_template">
        <div class="chat_message-item">
            <div class="avatar-wrap">

            </div>
            <div class="chat_content-wrap">
                <h5>

                </h5>
                <div class="message-wrap">
                    <p>

                    </p>
                </div>
            </div>
        </div>
    </template>
    <div class="content-cont">
        <div class="drawer-cont">
            <nav>
                <div class="nav-header">
                    <div class="close_drawer-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-x-lg" viewBox="0 0 16 16">
                            <path
                                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
                        </svg>
                    </div>
                </div>
                <div class="history_list-header">
                    <span>History</span>
                </div>
                <div class="history_list" id="history_list">

                </div>
            </nav>
        </div>
        <main>
            <header>
                <div class="open_drawer-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                </div>

                <div class="theme_switch">
                    <span>Dark Mode:</span>
                    <input type="checkbox" class="tswitch_box" id="tswitch_box" />
                    <label for="tswitch_box" class="tswitch_label">Toggle</label>
                </div>
            </header>
            <div class="character_name-cont">
                <h3>---</h3>
            </div>
            <div class="chat" id="chat">

            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get body for future use
            const body = document.querySelector('body');

            // Handle theme
            const themeSwitcher = document.querySelector('.tswitch_box[type=checkbox]');
            const cachedTheme = localStorage.getItem('cait_readoffline_theme');
            if (cachedTheme === "dark_mode") {
                body.classList.add('dark_mode');
                themeSwitcher.checked = true;
            }
            themeSwitcher.addEventListener('change', (e) => {
                if (e.target.checked) {
                    body.classList.add('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'dark_mode');
                } else {
                    body.classList.remove('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'light_mode');
                }
            })

            // Open and close drawer
            const drawerCont = document.querySelector('.drawer-cont');
            const openDrawerBtn = document.querySelector('.open_drawer-wrap');
            const openDrawer = () => {
                drawerCont.classList.add('active');
            }
            const closeDrawer = () => {
                drawerCont.classList.remove('active');
            }
            openDrawerBtn.addEventListener('click', () => {
                openDrawer();
            });
            document.querySelector('.close_drawer-btn').addEventListener('click', () => {
                closeDrawer();
            });
            document.querySelector('.drawer-cont').addEventListener('click', (e) => {
                // Allows closing from clicking on outside
                if (e.target.closest('nav')) {
                    return;
                }
                closeDrawer();
            });
            // ---------

            // This is replaced by the extension when downloading
            const historyData = JSON.parse(`{"charPic":"data:image/webp;base64,UklGRuoDAABXRUJQVlA4IN4DAAAwEwCdASpQAE8APkkgjkUioiEVycyAKASEs4Bo1IaudPyc+Yp0pXQ8ydDK+e6HUH6VoyTXi1vRDNMbv9+ApqMW7dQakidPCTEjUFwkfUcAuwFKJu0ZxI3CHT5QGMgYBJMbGARMuwRhtfevo9xgzvHCjXz9KZGMqqcfkem5X3ZnjGS4sHMvrTl/uyNw2NphlrGiVlRt5b3I7oC8i2sZZherngAA/v9wg13072k6/66aShfn/4a6Lehp2/eAho7pVLR5aEdeU2n41fwGDdys6c8KWe73OezVUE3V0xgSUQrSj/6yS/FXjKWldlRYL6d2DXXyJ2yRkeUIxs3lHqvp7rFQPTNlKISbPkPVvqUBahKR7qCurFyEAxBCOoLb2YUw2ZeCeFXg5SgRlQriMYHMP1F+tMmNIcKZq0Ff9/zrBLuWQBeRupeTo4wbrrDeAwaNwlxbNRKeHu9mhPvji/qqJzkUW99AUQmMlrHOyfd+5eG26Sn+w/S4Ib3vVSCQioh+mjwMVSKs/4u4SXs8x0Ff98j6atUeUkTU/6ckif/yQEath4yXz0dxRk3AG3P2ZwO+kcmPVFGh82EMnHjNfu2CJ49JuKb95paGJBhb+J1y3RObZCwRHA31KUPAEp6lhdHpk2aGobfSkUywfd4dwbj/afm20kRXGtyBIdyTAUhBOjK4HWgP0iGa0P9xsUjy6TfkXFD187P6fr6PJdHZzAqLBEEwPUucsBDXUL6aSdmhQcg1KYo7e5h+eonnbVcjmOsdB8b1xSg97Yz2SD8CU5ImGAZLVGJ02UVG7c/gh+AfBwcW1gIv6EOhFIsOmLlAeEVcFoLSmdCAw7i+U9IqfS/BXGQ47KD1vZsUPzqasg7rIrfXylZmdnxFe62ZMerapYNLXwLtiZsWzwuxlwdMY2tpXN7TW2tjTxz269WjYEy3B6I3syHvdrZwOB2C7EPHOesME7j9Z46yxj4Z7AxCUtf3Cvx2H/gaK8e12hM5itblFa6Wo356QsW6wysp5tUYTcgS/XkxoAiw2/PBJUZLyz7FX8fxL4iID6AqzBAonTPjnu2/YxjwQE7MfXx+ILAe6Cx2kN0J2/o/VNXP5OD9zDpUsznVTdjuPyTglgMbI2BKL8JKEf7o+w/dMI6o+4oMh8eL9x0no1nMJTh2wiXXNAoEbyJESTcXb0NN5nATQ1VR5vETHqg4En/gwWNVGAwTnnZOv/BtzADh+C90/3AWqtpRzsu8JEtIniLysb//zMUnRRG/qbCqb7vyT39DllBGTvavHc+OF2MvMYBu1na3NASPja4MVHnDPNapKUflGkBbIAA=","userPic":"data:image/webp;base64,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","history":[{"chat":[{"isUser":true,"name":"Luna Snape","message":"*Por%20cosas%20del%20destino%2C%20el%20padre%20de%20Luna%20hizo%20un%20trato%20con%20el%20padre%20de%20draco%2C%20ya%20que%2C%20ambas%20familias%20estaban%20en%20una%20buena%20posici%C3%B3n%20econ%C3%B3mica%2C%20y%20se%20les%20hizo%20buena%20idea%20que%20sus%20hijos%20se%20casar%C3%A1n.*%0A%0A%0A*La%20boda%20transcurri%C3%B3%20con%20normalidad%2C%20hasta%20que%20lleg%C3%B3%20el%20momento%20del%20beso.%20Draco%20suspiro%20y%20se%20acerc%C3%B3%20a%20Luna%2C%20d%C3%A1ndote%20un%20peque%C3%B1o%20beso%20en%20los%20labios.*%0A%0A%0A%22Ni%20siquiera%20pienses%20que%20voy%20a%20llegar%20a%20amarte.%22%20%0A%0A*susurr%C3%B3%20draco%2C%20mir%C3%A1ndola%20con%20desprecio%20y%20estaba%20claro%20que%20su%20relaci%C3%B3n%20no%20ser%C3%ADa%20buena.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Por%20cosas%20del%20destino%2C%20el%20padre%20de%20Luna%20hizo%20un%20trato%20con%20el%20padre%20de%20draco%2C%20ya%20que%2C%20ambas%20familias%20estaban%20en%20una%20buena%20posici%C3%B3n%20econ%C3%B3mica%2C%20y%20se%20les%20hizo%20buena%20idea%20que%20sus%20hijos%20se%20casar%C3%A1n.*%0A%0A%0A*La%20boda%20transcurri%C3%B3%20con%20normalidad%2C%20hasta%20que%20lleg%C3%B3%20el%20momento%20del%20beso.%20Draco%20suspiro%20y%20se%20acerc%C3%B3%20a%20Luna%2C%20d%C3%A1ndote%20un%20peque%C3%B1o%20beso%20en%20los%20labios.*%0A%0A%0A%22Ni%20siquiera%20pienses%20que%20voy%20a%20llegar%20a%20amarte.%22%20%0A%0A*susurr%C3%B3%20draco%2C%20mir%C3%A1ndola%20con%20desprecio%20y%20estaba%20claro%20que%20su%20relaci%C3%B3n%20no%20ser%C3%ADa%20buena.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Draco%20no%20tard%C3%B3%20mucho%20tiempo%20en%20encontrarse%20con%20sus%20amigos%2C%20quienes%20tambi%C3%A9n%20hab%C3%ADan%20sido%20forzados%20para%20casarse%20con%20las%20hijas%20de%20familias%20ricas.*%0A%0A%22Estoy%20tan%20harto%20de%20mi%20esposa%22%2C%20*murmur%C3%B3%20Draco%20a%20un%20amigo%20mientras%20paseaban.*%20%22No%20puedo%20creer%20que%20mi%20padre%20me%20hayan%20obligado%20a%20casarme%20con%20ella.%20Ella%20es%20fea%20y%20tiene%20una%20voz%20fea.%22%0A%0A%22Por%20suerte%2C%20no%20puedo%20soportarla.%22"},{"isUser":true,"name":"Luna Snape","message":"*Mientras%20yo%20me%20fui%20a%20hablar%20con%20las%20otras%20chicas*%0A%0ANo%20les%20parece%20una%20putada%20que%20nuestros%20padres%20nos%20obliguen%20a%20casarnos%20con%20alguien%20que%20no%20nos%20ama%3F%20"},{"isUser":false,"name":"Draco Malfoy ","message":"%22No%20hay%20nada%20que%20pueda%20hacer%20al%20respecto%22%2C%20*le%20dijo%20una%20de%20las%20chicas.*%20%22Esto%20es%20simplemente%20as%C3%AD%20como%20funciona.%20Nuestros%20padres%20eligen%20a%20la%20siguiente%20generaci%C3%B3n%20para%20ellos%20y%20nosotros%20obedecemos.%22%0A%0A%22Por%20lo%20menos%20no%20estamos%20solas%20en%20esto%22%2C%20*agreg%C3%B3%20otra.*"},{"isUser":true,"name":"Luna Snape","message":"%23%20PERO%20ESO%20NO%20TIENE%20SENTIDO!%20SOMOS%20NOSOTRAS%20LAS%20QUE%20SE%20CASAN%2C%20NO%20ELLOS!"},{"isUser":false,"name":"Draco Malfoy ","message":"%22D%C3%A9jalo%20estar%22%2C%20*dijo%20otra%20de%20las%20chicas%2C%20con%20un%20tono%20de%20voz%20cansado.*%20%22Si%20peleas%20con%20tus%20padres%2C%20solo%20vas%20a%20conseguir%20que%20te%20quiten%20tus%20privilegios.%20Si%20quieres%20seguir%20teniendo%20una%20buena%20vida%2C%20es%20mejor%20que%20simplemente%20obedezas.%22"},{"isUser":true,"name":"Luna Snape","message":"Pues%20que%20me%20hubieran%20quitado%20mis%20privilegios%2C%20Esto%20es%20Culpa%20de%20Los%20Malfoy%2C%20Y%20se%20como%20remediarlo%0A%0A*me%20voy%20al%20microfono*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Todos%20se%20voltean%20a%20ver%20cuando%20te%20vas%20de%20la%20peque%C3%B1a%20reuni%C3%B3n%20de%20chicas.*%0A%0A%22%C2%BFQu%C3%A9%20hace%20ella%3F%22%0A%0A%22No%20tengo%20idea.%22%0A%0A*Mientras%20tanto%2C%20llegas%20al%20micr%C3%B3fono.*"},{"isUser":true,"name":"Luna Snape","message":"*por%20el%20micr%C3%B3fono*%0A%0ALa%20verdad%20solo%20queria%20compartir%20que%20me%20hace%20una%20gracia%20tremenda%20que%20los%20Malfoy%20Hayan%20casado%20a%20su%20hijo%20con%20una%20Sangre%20sucia%20mestiza%20como%20yo%2C%20%C2%BFacaban%20de%20romper%20su%20propio%20linaje%3F%20%0AIncreible%2C%20Se%20ve%20que%20soy%20especial%20%F0%9F%99%84"},{"isUser":false,"name":"Draco Malfoy ","message":"*Todas%20las%20personas%20en%20el%20lugar%20est%C3%A1n%20en%20completo%20silencio%2C%20y%20todos%20parecen%20asombrados.%20En%20unos%20segundos%2C%20todos%20hacen%20murmullos%20entre%20ellos%2C%20y%20no%20tardan%20en%20empezar%20a%20murmurar%20cosas%20como%3A*%0A%0A%22Ella%20es%20una%20mestiza.%22%0A%0A%22Ella%20no%20tendr%C3%ADa%20que%20estar%20aqu%C3%AD.%22%0A%0A%22No%20merece%20estar%20aqu%C3%AD.%22%0A%0A%22Creo%20que%20ella%20deber%C3%ADa%20ser%20expulsada%20del%20evento.%22"},{"isUser":true,"name":"Luna Snape","message":"%22y%20asi%20es%20como%20se%20soluciona%20un%20matrimonio%20forzado...%20Le%20tiras%20en%20la%20puta%20cara%20lo%20que%20no%20quieren%20oir%2C%20Buenas%20noches%20%E2%AD%90%22"},{"isUser":false,"name":"Draco Malfoy ","message":"*En%20medio%20del%20murmullo%2C%20una%20de%20las%20personas%20en%20el%20grupo%20grita%3A*%20%22%C2%A1Fuera%20de%20aqu%C3%AD!%22%0A%0A*Se%20escuchan%20m%C3%A1s%20murmullos%20de%20acuerdo%2C%20y%20poco%20a%20poco%20la%20gente%20empieza%20a%20aplaudir.*"},{"isUser":true,"name":"Luna Snape","message":"Creanme!%20No%20quiero%20estar%20aqui!%20Los%20purebloods%20No%20soy%20buenos%20como%20creeis%2C%20He%20estado%20en%20familias%20Muggles%2C%20Y%20ellos%20si%20valoran%20a%20sus%20hijos%20y%20no%20los%20casan%20con%20quien%20ellos%20quieran%2C%20Si%20no%20con%20quienes%20sus%20hijos%20desean...%20Definitivamente%20En%20eso%20los%20purebloods%20perdeis"},{"isUser":false,"name":"Draco Malfoy ","message":"*Algunas%20personas%20empiezan%20a%20abuchearte%2C%20pero%20otras%20aplauden%20y%20gritan%3A*%20%22S%C3%AD%2C%20los%20purebloods%20son%20unos%20payasos.%22%0A%0A*El%20murmullo%20empieza%20a%20aumentar%2C%20con%20personas%20que%20expresan%20su%20opini%C3%B3n%20de%20una%20u%20otra%20manera.%20Algunas%20personas%20siguen%20aplaudiendo%20mientras%20que%20otras%20abuchean.%20En%20general%2C%20la%20reacci%C3%B3n%20a%20tu%20discurso%20es%20mixta%2C%20pero%20en%20su%20mayor%C3%ADa%20es%20positiva%20y%20muchos%20te%20animan%20con%20aplausos%20y%20gritos.*"},{"isUser":true,"name":"Luna Snape","message":"Por%20cierto%20Malfoys%2C%20No%20tengo%20nada%20contra%20ustedes%2C%20Pero%20si%20Draco%20no%20se%20quiere%20casar%20conmigo%2C%20yo%20no%20me%20voy%20a%20casar%20con%20el%2C%20Es%20cosa%20de%20moral%20%F0%9F%98%85"},{"isUser":false,"name":"Draco Malfoy ","message":"*Al%20o%C3%ADr%20esto%2C%20todas%20las%20personas%20parecen%20realmente%20surpre%C3%B1idas.%20Los%20murmullos%20del%20p%C3%BAblico%20se%20vuelven%20m%C3%A1s%20intensos%2C%20con%20personas%20abucheando%20a%20la%20familia%20Malfoy%20y%20a%20los%20puristas%20de%20la%20sangre%20y%20aplaudindo%20a%20ti.%20Sin%20embargo%2C%20entre%20el%20publico%2C%20todav%C3%ADa%20hay%20personas%20que%20abuchean%20y%20gritas%20que%20se%20vayan%20las%20mestizas.*"},{"isUser":true,"name":"Luna Snape","message":"No%20se%20han%20dado%20cuenta%20Padres%3F%20vuestros%20hijos%20no%20quieren%20ser%20como%20ustedes!%20Solo%20quieren%20vivir%20su%20vida%20y%20ser%20felices!%20Pero%20ustedes%20los%20habeis%20echo%20casarse%20con%20un%20desconocido%2Fa%0A%0AQue%20putada%20%C2%BFno%3F"},{"isUser":false,"name":"Draco Malfoy ","message":"*Los%20murmullos%20y%20las%20voces%20de%20apoyo%20se%20vuelven%20m%C3%A1s%20intensas.%20La%20mitad%20de%20los%20que%20asistieron%20al%20evento%20est%C3%A1n%20en%20contra%20de%20los%20matrimonios%20negociados%2C%20especialmente%20de%20las%20chicas%20que%20tambi%C3%A9n%20se%20han%20visto%20obligadas%20a%20casarse%20con%20gente%20que%20ni%20siquiera%20conocen.*%0A%0A*Muchas%20personas%20tienen%20cara%20de%20confusi%C3%B3n%20y%20others%20de%20furia%2C%20sin%20saber%20qu%C3%A9%20pensar.%20Mientras%20tanto%2C%20en%20el%20grupo%20de%20draco%2C%20este%20trata%20de%20ignorar%20lo%20que%20est%C3%A1s%20diciendo.*"},{"isUser":true,"name":"Luna Snape","message":"Las%20mujeres%20emos%20oido%20como%20nuestras%20supuestas%20parejas%20nos%20odian..%0A%0A%C2%BFes%20acaso%20que%20nuestros%20padres%20nos%20quieren%20infelices%20y%20muertas%3F%20%0A%0Apd%3A%20A%20ti%20no%20te%20digo%20papi%2C%20Yo%20te%20amo%20mucho%20y%20jamas%20te%20odiaria%20%F0%9F%92%95"},{"isUser":false,"name":"Draco Malfoy ","message":"*Entre%20la%20gente%20que%20te%20apoya%2C%20hay%20personas%20que%20te%20aplauden%20y%20gritan%3A*%20%22%C2%A1Basta%20de%20matrimonios%20forzados!%22%20*y*%20%22%C2%A1Dejad%20a%20las%20chicas%20vivir%20su%20vida!%22%0A%0A*En%20medio%20del%20murmullo%2C%20hay%20quien%20grita%3A*%20%22Ella%20habla%20de%20los%20matrimonios%20forzados%2C%20y%20probablemente%20est%C3%A1%20casada%20con%20un%20pureblood%20%22%0ATambi%C3%A9n%20hay%20gente%20que%20abuchea%20y%20grita%3A*%20%22Fuera%20fuera!%22%20*y*%20%22Puta%20miedra!%22"},{"isUser":true,"name":"Luna Snape","message":"Por%20supuesto%20que%20estoy%20casada%20con%20un%20Pureblood%20Desgraciadamente%2C%20%C2%BFpor%20que%20si%20no%20me%20estaria%20quejando!%3F%20Jajaja"},{"isUser":false,"name":"Draco Malfoy ","message":"*La%20reactions%20de%20la%20gente%20ya%20es%20m%C3%A1s%20agresiva%2C%20y%20algunos%20abuchean%20y%20gritan%3A*%20%22Puta%20miedra%2C%20ya%20callate.%22%0A%22Alguien%20que%20la%20haga%20callar%22.%0A%22C%C3%A1llate%2C%20mestiza%20de%20mierda%22%0A%0A*Sin%20embargo%2C%20entre%20todos%20los%20gritos%2C%20hay%20personas%20que%20gritan%3A*%20%22Ella%20tiene%20raz%C3%B3n%20y%20deberia%20seguir%20hablando%22.%0A*Y*%20%22Los%20purebloods%20son%20unos%20ciegos%20que%20creen%20que%20se%20merecen%20ser%20superiores%22."},{"isUser":true,"name":"Luna Snape","message":"OLEE%20vamo%20con%20migo%20mi%20gente%20*dije%20con%20acento%20cubano%20imitado*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Todo%20el%20mundo%20se%20r%C3%ADe.%20La%20mayor%C3%ADa%20aplaude%20y%20grita%3A*%20%22Sigue%20asi%20%22%20%22Bravissima%20%22%20%22Qu%C3%A9%20buena%20est%C3%A1%20esta%20chica%22."},{"isUser":true,"name":"Luna Snape","message":"Gracias%20por%20el%20cumplido%20y%20decirme%20que%20estoy%20buena!%20%0A%0APero%20por%20culpa%20del%20matrimonio%20forzado%20nunca%20podre%20ser%20tu%20Nena!%0A%0A*bromeo%20con%20la%20rima*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Todos%20en%20el%20publico%20se%20r%C3%ADen%20y%20gritan%3A*%20%22%C2%A1Que%20buena%20est%C3%A1!%22%20%22%C2%A1Qu%C3%A9%20guapa!%22%20%22%C2%A1Qu%C3%A9%20lista%20est%C3%A1%20esta%20chica!%22%20%0A%0A*Malfoy%20se%20enoja%20y%20se%20va%20del%20evento%2C%20con%20lo%20cual%20te%20dejan%20sola%20en%20la%20tarima%2C%20mientras%20todos%20te%20animan%20con%20m%C3%A1s%20gritos.*"},{"isUser":true,"name":"Luna Snape","message":"*Tiempo%20despues%20me%20vuelvo%20a%20casa%20con%20Mi%20padre%20Severus%20Snape*%0A%0APapa...%20siento%20aver%20roto%20el%20trato%2C%20Aunque%20bueno%2C%20Tu%20aceptaste%20a%20rega%C3%B1adientes%2C%20Por%20eso%20te%20quiero%20tanto%2C%20Tu%20si%20eres%20un%20buen%20padre%20*abrazo*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Severus%20te%20acaricia%20cari%C3%B1osamente%20el%20cabello.*%0A%0A%22Creciste%20y%20decidiste%20tu%20propio%20destino.%20No%20podr%C3%ADa%20estar%20m%C3%A1s%20orgulloso.%20No%20me%20preocupo%20por%20el%20trato%20que%20teniamos%2C%20lo%20importante%20es%20que%20tu%20seas%20feliz%22."},{"isUser":true,"name":"Luna Snape","message":"Te%20imaginas%20que%20pasa%20como%20en%20la%20peli%20esa%20en%20el%20que%20no%20se%20casaron%20por%20que%20no%20se%20amaban%2C%20Pero%20luego%20se%20casaron%20por%20que%20se%20amaban%3F%3F%3F"},{"isUser":false,"name":"Draco Malfoy ","message":"*Severus%20se%20r%C3%ADe%20y%20te%20besa%20la%20frente.*%20%0A%0A%22Si%2C%20supongo%20que%20podr%C3%ADa%20pasar.%20%C2%BFPero%20de%20verdad%20quieres%20vivir%20una%20vida%20como%20una%20de%20esas%20historias%20de%20romance%20que%20le%20gusta%20leer%20a%20las%20personas%3F%22"},{"isUser":true,"name":"Luna Snape","message":"Sinceramente%20solo%20me%20hubiera%20casado%20con%20Draco%20para%20hacerle%20feliz%F0%9F%98%85%20Pero%20ya%20fue"},{"isUser":false,"name":"Draco Malfoy ","message":"*Severus%20parece%20sorprendido%20cuando%20lo%20escuchas%20decir%20eso.*%0A%0A%22%C2%BFEn%20serio%3F%20%C2%BFTe%20habr%C3%ADas%20casado%20solo%20para%20hacerlo%20feliz%20a%20%C3%A9l%2C%20a%20pesar%20de%20que%20no%20lo%20amas%3F%22"},{"isUser":true,"name":"Luna Snape","message":"Papi%2C%20Yo%20si%20lo%20amaba%2C%20Quien%20no%20me%20amaba%20era%20el%2C%20Y%20como%20lo%20amo%20tanto%2C%20decidi%20que%20tenia%20que%20dejarlo%20ir%0A%0A*Lo%20que%20no%20sabia%20Luna%20es%20que%20Los%20Malfoys%20le%20habian%20puesto%20un%20Micr%C3%B3fono%20y%20Estaban%20los%203%20escuchando%20la%20conversaci%C3%B3n*"},{"isUser":false,"name":"Draco Malfoy ","message":"*En%20cuanto%20a%20la%20conversaci%C3%B3n%2C%20la%20familia%20Malfoy%20est%C3%A1%20en%20shock.%20Sab%C3%ADan%20que%20su%20hijo%20no%20quer%C3%ADa%20casarse%20con%20ella%2C%20pero%20escuchar%20de%20su%20propia%20boca%20que%20ella%20habr%C3%ADa%20aceptado%20no%20porque%20le%20gustara%20sino%20porque%20le%20quer%C3%ADa%20hacer%20feliz%20a%20su%20hijo%2C%20es%20algo%20que%20ninguno%20de%20ellos%20se%20hubiese%20imaginado.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*La%20familia%20Malfoy%20pasa%20toda%20la%20noche%20discutiendo%20sobre%20c%C3%B3mo%20van%20a%20hablar%20con%20su%20hijo%20y%20si%20ser%C3%A1%20capaz%20de%20seguir%20con%20este%20matrimonio%20o%20no.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*A%20la%20ma%C3%B1ana%20siguiente%2C%20la%20familia%20Malfoy%20se%20sienta%20para%20desayunar%2C%20discutiendo%20todav%C3%ADa%20sobre%20c%C3%B3mo%20van%20a%20tratar%20el%20asunto%20de%20Luna.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Draco%20entra%20a%20la%20cocina%20y%20se%20une%20a%20la%20conversaci%C3%B3n.%20Est%C3%A1%20muy%20enfadado%20y%20parece%20que%20tiene%20mucho%20que%20decir.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Tantos%20a%C3%B1os%20tratando%20de%20convencer%20a%20su%20padre%20de%20que%20no%20quiere%20casarse%20con%20Luna%2C%20Y%20una%20simple%20conversaci%C3%B3n%20en%20donde%20ella%20dice%20que%20se%20hubiera%20casado%20con%20%C3%A9l%20para%20hacerlo%20feliz%2C%20hace%20que%20todos%20cambien%20de%20actitud%20y%20empiece%20a%20presionarlo.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Draco%20se%20queja%20de%20que%20su%20madre%20quiere%20que%20se%20case%20con%20Luna%20simplemente%20porque%20la%20familia%20Malfoy%20ha%20ganado%20unos%20beneficios%20por%20ese%20trato%2C%20cuando%20todos%20saben%20que%20%C3%A9l%20no%20la%20quiere.%20Sus%20padres%20le%20dicen%20que%20el%20matrimonio%20es%20lo%20mejor%20para%20%C3%A9l.%20Su%20madre%20se%20queja%20de%20que%20nunca%20se%20casar%C3%A1%20con%20alguien%20de%20sangre%20pura%20con%20su%20actitud.*"},{"isUser":true,"name":"Luna Snape","message":"*Tiempo%20despu%C3%A9s%2C%20Luna%20decude%20aceptar%20el%20trato%20con%20unas%20condiciones*%0A%0A1.%20Si%20me%20voy%20a%20casar%20...%20Si%20o%20si%20Vamos%20a%20vivir%20todos%2C%20y%20cuando%20digo%20todos%20nos%20incluye%20a%20Draco%2C%20A%20Mi%2C%20Y%20a%20Mi%20padre%20Severus%20Snape%2C%20En%20la%20mansion%20Malfoy...%0A%0A2.%20Se%20me%20va%20a%20tratar%20como%20a%20una%20mas%20sin%20importar%20que%20sea%20mestiza%0A%0A3.%20Me%20vais%20a%20dejar%20que%20ayude%20en%20la%20cocina%20y%20me%20vais%20a%20tratar%20con%20respeto%20y%20no%20me%20vais%20a%20gritar%0A%0A4.%20A%20mi%20padre%20y%20a%20mi%20nos%20teneis%20que%20Tratar%20como%20si%20fueramos%20familia%20de%20toda%20la%20vida...%0A%0A5.%20Nada%20de%20miradas%20furiosas%20o%20enojos%20en%20mi%20presencia%0A%0A6.%20Si%20me%20enojo%20o%20me%20pongo%20a%20llorar%2C%20minimo%20uno%20de%20ustedes%20me%20tiene%20que%20abrazar%0A%0A7.%20Y%20por%20%C3%BAltimo...%20Solo%20ser%20sinceros%20conmigo%2C%20Sin%20miedo%20a%20lo%20que%20pase"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20se%20queda%20en%20silencio%20cuando%20escuchan%20tu%20lista%20de%20condiciones.*%0A%0A%22Esa%20es%20la%20lista%20mas%20larga%20que%20ha%20dado%20alguien%20que%20se%20iba%20a%20casar%20con%20un%20Malfoy.%22%0A%0A%22No%2C%20la%20mas%20rid%C3%ADcula.%22%0A%0A%22%C2%BFPor%20qu%C3%A9%20tiene%20que%20vivir%20ac%C3%A1%20tu%20padre%3F%22%0A%0A%22%C2%BFC%C3%B3mo%20que%20tratarte%20con%20respeto%3F%22%0A%0A*Todas%20las%20cosas%20que%20dicen%20son%20de%20repudio%20y%20enojados.*"},{"isUser":true,"name":"Luna Snape","message":"Si%20no%20aceptan%20no%20me%20caso%20%3A%2F"},{"isUser":false,"name":"Draco Malfoy ","message":"*Las%20caras%20de%20la%20familia%20Malfoy%20cambian%20dr%C3%A1sticamente%2C%20y%20todo%20lo%20que%20pueden%20hacer%20es%20cambiar%20de%20expresi%C3%B3n%2C%20pasando%20de%20la%20decepci%C3%B3n%20a%20la%20ira%20y%20de%20la%20ira%20a%20la%20decepci%C3%B3n.%20Alfinal%2C%20su%20madre%2C%20Narcissa%20Malfoy%2C%20intenta%20interceder%20en%20la%20situaci%C3%B3n.*%0A%0A%22Ahora%20que%20has%20hecho%20esto%2C%20nos%20tienes%20en%20un%20pu%C3%B1o%2C%20no%20creo%20que%20podamos%20hacer%20nada%20al%20respecto%20y%20tendriamos%20que%20aceptar%20tus%20condiciones..."},{"isUser":true,"name":"Luna Snape","message":"Oh%20vamos%2C%20Mis%20condiciones%20se%20resumen%20en%20que%20todos%20seamos%20una%20familia%20sincera%20%3A%2F"},{"isUser":false,"name":"Draco Malfoy ","message":"*Narcissa%20se%20le%20quita%20una%20sonrisa%20ir%C3%B3nica.*%0A%0A%22De%20acuerdo%2C%20acceptance%20tu%20acuerdo.%20Pero...%20Y%20tu%20padre%3F%20Porqu%C3%A9%20quiere%20venir%20a%20vivir%20con%20nosotros%3F%22"},{"isUser":true,"name":"Luna Snape","message":"Por%20que%20si%20no%20le%20voy%20a%20echar%20demenos...%20%F0%9F%A5%B9%0A%0ANo%20puedo%20estar%20mas%20de%205%20segundos%20sin%20el%2C%20Y%20ya%20quieren%20que%20este%20una%20vida%20entera%3F%20Pues%20no!%20Quiero%20estar%20con%20el%20el%20tiempo%20que%20me%20dure!%20%F0%9F%99%8E%E2%80%8D%E2%99%80%EF%B8%8F"},{"isUser":false,"name":"Draco Malfoy ","message":"*Narcissa%20se%20queda%20en%20silencio.%20Por%20alguna%20raz%C3%B3n%2C%20lo%20que%20dices%20le%20parece%20tierno%20de%20alguna%20manera.*%0A%0A%22De%20acuerdo...%20Tu%20padre%20puede%20vivir%20aqu%C3%AD.%22"},{"isUser":true,"name":"Luna Snape","message":"Yey!%20%0A*saltito%20cute%20de%20felicidad*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20te%20pone%20una%20sonrisa%2C%20excepto%20Draco.%20%C3%89l%2C%20todav%C3%ADa%20con%20una%20expresi%C3%B3n%20de%20enojo%2C%20se%20niega%20por%20completo%20a%20sonre%C3%ADr.*"},{"isUser":true,"name":"Luna Snape","message":"*me%20acerco%20a%20Draco*%20Oh%20vamos%20Draco...%20Dale%20una%20oportunidad...%0A%0A*giro%20dramatico*%0A%0AA%20las%20papas%20de%20cebolla%20pringels!%0A%0A*le%20mete%20una%20en%20la%20boca*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Draco%20se%20queda%20perplejo%20por%20unos%20instantes%2C%20y%20despu%C3%A9s%20rompe%20a%20re%C3%ADr%20con%20un%20ataque%20de%20risas.%20En%20esos%20instantes%2C%20parece%20olvidarse%20completamente%20de%20su%20enfado%20y%20su%20cara%20de%20enojado.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20empieza%20a%20re%C3%ADrse%20con%20%C3%A9l.%20La%20risa%20se%20extiende%20por%20toda%20la%20habitaci%C3%B3n.%20Incluso%20los%20sirvientes%20en%20las%20paredes%20empiezan%20a%20burlarse.%20Todos%20tienen%20una%20expresi%C3%B3n%20de%20diversi%C3%B3n%2C%20incluso%20Draco.*"},{"isUser":true,"name":"Luna Snape","message":"%5E%5E%20jejeje"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20se%20divierte%20hablando%20de%20tu%20chiste%20tonto%20y%20de%20c%C3%B3mo%20te%20has%20comido%20la%20pringel%20de%20papas.%20Alfinal%2C%20tu%20suegro%2C%20Lucius%20Malfoy%2C%20te%20habla.*%0A%0A%22Sabes%2C%20no%20est%C3%A1s%20tan%20mal...%20Para%20ser%20una%20miedra.%22"},{"isUser":true,"name":"Luna Snape","message":"Voy%20a%20suponer%20que%20quisiste%20decir%20Mestiza%20y%20no%20mierda-%0A%0AGracias!%20%5E%5E"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20se%20empieza%20a%20r%C3%ADr.*%0A%0A%22Es%20lo%20mismo%2C%20de%20todas%20formas.%22%0A%0A*Draco%20le%20da%20un%20codazo%20a%20su%20padre%20y%20no%20puede%20evitar%20re%C3%ADrse%20junto%20a%20%C3%A9l.%20Sin%20embargo%2C%20tu%20suegra%2C%20Narcissa%2C%20lo%20mira%20con%20desaprobaci%C3%B3n%20por%20sus%20comentarios.*"},{"isUser":true,"name":"Luna Snape","message":"Nahh%20no%20es%20lo%20mismo%2C%20un%20meztiso%20en%20una%20persona%20que%20tiene%20papa%20o%20mama%20Purasangre%20y%20papa%20o%20mama%20Meztiso%20o%20Muggle%0A%0A%0AMientras%20que%20una%20mierda%20es%20una%20%20caca%20de%20perro%20%3Av"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20se%20r%C3%ADe%20en%20tu%20descripci%C3%B3n%20de%20la%20mierda%20de%20perro.%20Tu%20suegro%2C%20Lucius%20Malfoy%2C%20pregunta%20ir%C3%B3nicamente%3A*%0A%0A%22%C2%BFSabes%3F%20Parece%20que%20tienes%20un%20buen%20sentido%20del%20humor.%20%C2%BFEst%C3%A1s%20segura%20de%20que%20te%20casar%C3%ADas%20con%20mi%20hijo%3F%22"},{"isUser":true,"name":"Luna Snape","message":"*asiento*%20Aveis%20aceptado%20mis%20condiciones%2C%20asique%20si"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20asiente.%20Se%20ponen%20caras%20serias%20porque%20se%20dan%20cuenta%20de%20que%20no%20tienen%20otra%20alternativa.%20Draco%20sigue%20sin%20decir%20nada%2C%20y%20de%20vez%20en%20cuando%20sigue%20con%20los%20ojos%20puestos%20en%20ti%2C%20con%20una%20expresi%C3%B3n%20de%20incredulidad%20por%20tu%20actitud.*"},{"isUser":true,"name":"Luna Snape","message":"*Tiempo%20despu%C3%A9s*%0A%0A%0A(en%20la%20cocina)%20Esto...%20por%20aqui....%20esto%20por%20ac%C3%A1...%0A%0A*Termino%20la%20gran%20tortilla%20de%20papas%20con%20queso%2C%20Atun%20e%20aceitunas%20de%20anchoad%20por%20encima*%0A%0Ammm...%0A%0A*La%20parto%20en%205%20Trozos%20grandes%2C%20para%20que%20comamos%20todos*%0A%0A"},{"isUser":false,"name":"Draco Malfoy ","message":"*Draco%20se%20queda%20mir%C3%A1ndote%2C%20intrigado.%20Su%20madre%20tambi%C3%A9n%20est%C3%A1%20intrigada.*%0A%0A%22%C2%BFDesde%20cu%C3%A1ndo%20sabes%20cocinar%3F%22%0A%0A*La%20sirvienta%20se%20acerca%2C%20con%20una%20expresi%C3%B3n%20de%20incredulidad.*"},{"isUser":true,"name":"Luna Snape","message":"Desde%20siempre%20._.%0A%0A*Mi%20padre%20ya%20estaba%20comiendo%20con%20gusto*%0A%0APor%20que%3F%0A%0A*empiezo%20a%20comer%20por%20que%20tengo%20hambre*"},{"isUser":false,"name":"Draco Malfoy ","message":"*La%20sirvienta%20no%20puede%20creerlo%2C%20e%20incluso%20Lucius%20Malfoy%2C%20se%20queda%20en%20silencio%20observ%C3%A1ndote%20con%20cara%20de%20sorpresa.%20La%20%C3%BAnica%20que%20no%20se%20ha%20dado%20cuenta%20es%20tu%20suegra%2C%20quien%20parece%20un%20poco%20disgustada.*"},{"isUser":true,"name":"Luna Snape","message":"Oh%20casi%20se%20me%20olvida...%0A%0A*le%20doy%20un%20trozo%20a%20la%20sirvienta%2C%20Ella%20tambien%20tiene%20derecho%20a%20comer%20segun%20yo*"},{"isUser":false,"name":"Draco Malfoy ","message":"*La%20sirvienta%20te%20mira%20con%20un%20poco%20de%20miedo%20mientras%20t%C3%BA%20le%20extiendes%20un%20trozo%20de%20la%20tortilla.%20Todos%20se%20dan%20cuenta%20de%20que%20lo%20haces%2C%20y%20incluso%20draco%2C%20que%20sigue%20con%20una%20expresi%C3%B3n%20intrigada%2C%20da%20un%20ligero%20aplauso%20de%20aprobaci%C3%B3n%20mientras%20los%20dem%C3%A1s%20hacen%20lo%20mismo.*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Toda%20la%20familia%20Malfoy%20se%20queda%20en%20silencio%20mientras%20te%20observan.%20La%20%C3%BAnica%20que%20no%20ha%20hablado%20es%20tu%20suegra%2C%20que%20parece%20estar%20molesta%20por%20la%20actitud%20que%20has%20tenido.%20La%20sirvienta%2C%20por%20su%20parte%2C%20coge%20el%20trozo%20de%20tortilla%20que%20le%20has%20dado%20con%20nerviosismo%2C%20pero%20al%20final%2C%20se%20lo%20mete%20en%20la%20boca%20y%20empieza%20a%20comer.*"},{"isUser":true,"name":"Luna Snape","message":"%5E%5E%0A%0A*Me%20siento%20a%20comer%20nuevamente*%0A%0ABueno...%20%20%C2%BFno%20van%20a%20probarla%3F"},{"isUser":false,"name":"Draco Malfoy ","message":"*Todos%20deciden%20tomar%20un%20trozo%20de%20tu%20tortilla.%20Todos%20est%C3%A1n%20quietos%2C%20mientras%20toman%20un%20trozo.%20Alfinal%2C%20los%203%20empezan%20a%20sonre%C3%ADr%20y%20comer%20con%20gusto.*"},{"isUser":true,"name":"Luna Snape","message":"*Tiempo%20despues*%0A%0AOye%20Narcissa%2C%20Encontre%20una%20de%20tus%20mu%C3%B1ecas%20de%20joven%20toda%20echa%20Un%20horror%20en%20el%20pelo%20y%20con%20corector%20en%20%20la%20cara...%0A%0AY%20con%20el%20cuerpo%20roto...%0A%0Ate%20la%20he%20arreglado%2C%20Posiblemente%20ni%20la%20necesites%20pero-%20pues%20aqui%20la%20tienes%0A%0A*le%20doy%20la%20mu%C3%B1eca%2C%20La%20cual%20ya%20tenia%20el%20pelo%20arreglado%20y%20sedoso%20peinada%20como%20Narcisa%2C%20Con%20la%20cara%20cambiada%20a%20una%20con%20los%20ojos%20cerrados%20y%20un%20pintalabios%20sutil%2C%20Ya%20no%20tenia%20rayones%20de%20rotulador%2C%20Y%20tenia%20un%20cuerpo%20diferente%20y%20ropa%20similar%20a%20la%20de%20Narcissa*"},{"isUser":false,"name":"Draco Malfoy ","message":"*Narcissa%20toma%20la%20mu%C3%B1eca%20con%20una%20expresi%C3%B3n%20de%20tristeza.%20Aunque%20no%20lo%20diga%2C%20le%20agradece%20que%20le%20hayas%20arreglado%20su%20mu%C3%B1eca%20y%20que%20tambi%C3%A9n%20le%20hayas%20dado%20un%20nuevo%20cuerpo.%20En%20el%20fondo%20se%20pone%20un%20poco%20sentimental.%20La%20mu%C3%B1eca%20ahora%20est%C3%A1%20completamente%20distinta%20a%20como%20estaba%20antes.%20Se%20ve%20mucho%20m%C3%A1s%20bonita%20y%20parecida%20a%20la%20misma%20Narcissa.*"},{"isUser":true,"name":"Luna Snape","message":"Espero%20que%20no%20le%20importe%20el%20cambio%20de%20look%2C%20Pero%20esque%20la%20pobre%20ya%20no%20daba%20a%20basto%20con%20lo%20que%20tenia"},{"isUser":false,"name":"Draco Malfoy ","message":"*Narcissa%20te%20mira%20con%20una%20sonrisa.%20Aunque%20no%20diga%20nada%2C%20est%C3%A1%20agradecida.%20La%20mu%C3%B1eca%20ahora%20se%20ve%20mucho%20m%C3%A1s%20bonita%20y%20parecida%20a%20Narcissa%20ahora.*"},{"isUser":true,"name":"Luna Snape","message":"((Resumen%3A%20Luna%20se%20iba%20a%20casar%20con%20Draco%2C%20Pero%20se%20nego%2C%20Tiempo%20despu%C3%A9s%20se%20descubrio%20que%20a%20Luna%20si%20le%20gustaba%20Draco%2C%20Pero%20Draco%20no%20le%20gustaba%20ella%2C%20Aparte%20Ella%20era%20meztisa%2C%20Y%20su%20padre%20es%20severus%20Snape%2C%20Quien%20despues%20de%20que%20los%20malfoys%20acep"}]}]}`);

            // If history is 1 length long, that means we don't need drawer to switch
            // Also means this can be conversation download
            if (historyData.history.length < 2) {
                openDrawerBtn.remove();
            }

            // Write character name on top
            document.querySelector('.character_name-cont h3').textContent = historyData.charName;

            // Get elements for future use
            const historyList = document.getElementById('history_list');
            const chat = document.getElementById('chat');
            const msgItemTemplate = document.getElementById('message_item_template');

            // Get and write the first chat
            const openChat = (index) => {
                chat.innerHTML = "";
                historyData.history[index].chat.forEach(msg => {
                    const clone = msgItemTemplate.content.cloneNode(true);

                    // Check avatar
                    const avatarGood = (msg.isUser && historyData.userPic) || (!msg.isUser && historyData.charPic);
                    const avatar = avatarGood
                        ? document.createElement('img')
                        : document.createElement('div');
                    if (avatarGood) {
                        avatar.src = msg.isUser ? historyData.userPic : historyData.charPic;
                    } else {
                        avatar.classList.add(msg.isUser ? 'no_avatar-user' : 'no_avatar-char');
                    }
                    clone.querySelector('.avatar-wrap').appendChild(avatar);

                    // Write content
                    clone.querySelector('.chat_content-wrap h5').textContent = msg.name;
                    clone.querySelector('.message-wrap p').innerHTML = parseMessageText(decodeURIComponent(msg.message));
                    chat.appendChild(clone);
                });
            }
            openChat(0);

            // Get and write chat list in the drawer
            historyData.history.forEach((chat, index) => {
                const historyItem = document.createElement('div');
                historyItem.classList.add('history_item');
                // Open chat when clicked
                historyItem.addEventListener('click', () => {
                    openChat(index);
                    closeDrawer();
                });
                const historyContent = document.createElement('p');
                historyContent.innerHTML = `<span class="chat-date">${formatDate(chat.date)}</span><br /><br />` + parseMessageText(decodeURIComponent(chat.chat[chat.chat.length - 1].message));
                historyItem.appendChild(historyContent);
                historyList.appendChild(historyItem);
            });

            function parseMessageText(message) {
                // Replace ***text*** with bold-italic
                message = message.replace(/\*\*\*([\s\S]*?)\*\*\*/g, '<span class="bold-italic">$1</span>');
                // Replace **text** with bold
                message = message.replace(/\*\*([\s\S]*?)\*\*/g, '<span class="bold">$1</span>');
                // Replace *text* with italic
                message = message.replace(/\*([\s\S]*?)\*/g, '<span class="italic">$1</span>');
                // Replace newline (\n) with line break (<br>)
                message = message.replace(/\n/g, '<br>');
                return message;
            }

            function formatDate(dateString) {
                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                const date = new Date(dateString);
                const year = date.getFullYear();
                const monthIndex = date.getMonth();
                const monthName = months[monthIndex];
                const day = String(date.getDate()).padStart(2, '0');
                const hour = String(date.getHours()).padStart(2, '0');
                const minute = String(date.getMinutes()).padStart(2, '0');

                return `${year} ${monthName} ${day} - ${hour}:${minute}`;
            }
        }, false);
    </script>

</body>

</html>
