<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAI Library</title>
    <style type="text/css">
        /* Themes */
        :root {
            --body-bg: #f5f8fa;
            --border-color: #efefef;
            --messagebox-bg: #ffffff;
            --messagebox-shadow: rgba(0, 0, 0, 0.1);
            --font-color: #1f1f1f;
            --rgba-1: rgba(0, 0, 0, 0.05);
            --rgba-2: rgba(0, 0, 0, 0.1);
        }

        .dark_mode {
            --body-bg: #343434;
            --border-color: #4f4f4f;
            --messagebox-bg: #474747;
            --messagebox-shadow: rgba(0, 0, 0, 0);
            --font-color: #ededed;
            --rgba-1: rgba(255, 255, 255, 0.06);
            --rgba-2: rgba(255, 255, 255, 0.2);
        }



        * {
            box-sizing: border-box;
        }

        button,
        select,
        img {
            user-select: none;
        }

        ol,
        ul,
        li,
        a,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            text-decoration: none;
            margin: 0;
            padding: 0;
        }

        .italic {
            font-style: italic;
        }

        .bold {
            font-weight: bold;
        }

        .bold-italic {
            font-weight: bold;
            font-style: italic;
        }

        html {
            font-size: 14px;
        }

        body {
            padding: 0;
            margin: 0;
            background-color: var(--body-bg);
            color: var(--font-color);
        }

        .content-cont {
            display: flex;
            flex-direction: row;
        }


        /* NAV / Drawer */

        @keyframes slideIn {
            0% {
                opacity: 0;
                left: -200px;
            }

            100% {
                opacity: 1;
                left: 0;
            }
        }

        .drawer-cont.active {
            display: block;
        }

        .drawer-cont {
            display: none;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
        }

        nav {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            max-width: 80%;
            background-color: var(--body-bg);

            display: flex;
            flex-direction: column;
            padding: 10px 0;
            overflow: hidden;
            animation: slideIn 0.2s ease-in-out;
            -webkit-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
            box-shadow: 4px 0px 15px 0px rgba(0, 0, 0, 0.2);
        }

        .nav-header {
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 0 10px 0 20px;
            margin-bottom: 20px;
            gap: 10px;
        }

        .close_drawer-btn {
            align-self: flex-end;
            padding: 10px;
            transition: background-color 0.1s ease-in-out;
            cursor: pointer;
            border-radius: 8px;
        }

        .close_drawer-btn:hover {
            background-color: var(--rgba-1);
        }

        .close_drawer-btn svg {
            display: flex;
            width: 30px;
            height: 30px;
            color: var(--font-color);
        }

        /*.nav-new_char-btn {
            align-self: flex-start;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1.1rem;
            cursor: pointer;
            background-color: #4e9733;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .nav-new_char-btn:hover {
            background-color: #6ba755;
        }*/

        .history_list-header {
            font-size: 1.5rem;
            padding: 10px 20px;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            margin-bottom: 10px;
        }

        .history_list {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .history_item {
            transition: background-color 0.1s ease-in-out;
            padding: 20px 30px 20px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--rgba-2);
        }

        .history_item:first-child {
            border-top: 1px solid var(--rgba-2);
        }

        .history_item:hover {
            background-color: var(--rgba-1);
        }

        .history_item p {
            font-family: Arial, Helvetica, sans-serif;
        }

        .history_item p .chat-date {
            font-style: italic;
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        /*nav .char-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;
            transition: background-color 0.1s ease-in-out;
            padding: 10px 40px 10px 20px;
            cursor: pointer;
        }

        nav .char-item:hover {
            background-color: var(--rgba-1);
        }

        nav .nav-avatar-wrap {
            width: 40px;
            height: 40px;
        }

        nav .nav-avatar-wrap img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        nav .char-item span {
            font-size: 1.3rem;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        }*/

        /* MAIN */
        main {
            display: flex;
            flex-direction: column;
            padding: 0 4%;
            width: 100%;
        }

        /* HEADER */
        header {
            padding: 6px 6px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
        }

        .open_drawer-wrap svg {
            display: flex;
            width: 46px;
            height: 46px;
            color: var(--font-color);
        }


        .theme_switch {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .theme_switch span {
            font-size: 1.1rem;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .tswitch_box[type=checkbox] {
            height: 0;
            width: 0;
            visibility: hidden;
            position: absolute;
        }

        .tswitch_label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            display: block;
            border-radius: 15px;
            position: relative;
            border: 1px solid #323232;
            background: #f5f8fa;
        }

        .tswitch_label:after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50px;
            transition: 0.2s;
            background: #323232;
        }

        .tswitch_box:checked+label {
            background: #323232;
            border: 1px solid #f5f8fa;
        }

        .tswitch_box:checked+label:after {
            left: calc(100% - 5px);
            transform: translateX(-100%);
            background: #f5f8fa;
        }

        .tswitch_label:active:after {
            width: 25px;
        }

        /*.update_current_char-btn {
            margin-left: auto;
            outline: none;
            border: none;
            color: #ffffff;
            border-radius: 6px;
            padding: 10px 20px;
            font-size: 1rem;
            align-self: center;
            cursor: pointer;
            background-color: #336c97;
            transition: background-color 0.1s ease-in-out;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }

        .update_current_char-btn:hover {
            background-color: #5f829d;
        }*/


        /* CONVERSATION */
        .character_name-cont {
            text-align: center;
            padding: 20px 10px;
        }

        .character_name-cont h3 {
            font-size: 1.3rem;
            font-weight: 400;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .chat {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-self: center;
            padding-bottom: 30px;
        }

        .chat_message-item {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 10px;
        }

        .chat .avatar-wrap {
            flex-shrink: 0;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            overflow: hidden;
        }

        .chat .avatar-wrap>* {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .chat .avatar-wrap .no_avatar-user {
            background-color: #5157cf;
        }

        .chat .avatar-wrap .no_avatar-char {
            background-color: #e20909;
        }

        .chat .chat_content-wrap {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 7px;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 4px var(--messagebox-shadow);
            background-color: var(--messagebox-bg);
            overflow: hidden;
        }

        .chat .chat_content-wrap h5 {
            font-size: 1rem;
            font-weight: bold;
            font-family: Arial, Helvetica, sans-serif;
        }

        .chat .chat_content-wrap .message-wrap {
            font-size: 1rem;
            font-family: Arial, Helvetica, sans-serif;
        }


        @media (min-width: 576px) {}

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }

            nav {
                min-width: 40%;
            }

            header {
                padding: 14px 20px;
            }

            .open_drawer-wrap {
                padding: 4px;
                cursor: pointer;
                border-radius: 6px;
                transition: background-color 0.1s ease-in-out;
            }

            .open_drawer-wrap:hover {
                background-color: var(--rgba-1);
            }

            .chat {
                width: 80%;
            }

            .chat .chat_content-wrap {
                padding: 14px;
            }
        }

        @media (min-width: 992px) {
            .chat {
                width: 70%;
            }
        }

        @media (min-width: 1200px) {}

        @media (min-width: 1400px) {}
    </style>
</head>

<body>
    <template id="message_item_template">
        <div class="chat_message-item">
            <div class="avatar-wrap">

            </div>
            <div class="chat_content-wrap">
                <h5>

                </h5>
                <div class="message-wrap">
                    <p>

                    </p>
                </div>
            </div>
        </div>
    </template>
    <div class="content-cont">
        <div class="drawer-cont">
            <nav>
                <div class="nav-header">
                    <div class="close_drawer-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-x-lg" viewBox="0 0 16 16">
                            <path
                                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
                        </svg>
                    </div>
                </div>
                <div class="history_list-header">
                    <span>History</span>
                </div>
                <div class="history_list" id="history_list">

                </div>
            </nav>
        </div>
        <main>
            <header>
                <div class="open_drawer-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                </div>

                <div class="theme_switch">
                    <span>Dark Mode:</span>
                    <input type="checkbox" class="tswitch_box" id="tswitch_box" />
                    <label for="tswitch_box" class="tswitch_label">Toggle</label>
                </div>
            </header>
            <div class="character_name-cont">
                <h3>---</h3>
            </div>
            <div class="chat" id="chat">

            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get body for future use
            const body = document.querySelector('body');

            // Handle theme
            const themeSwitcher = document.querySelector('.tswitch_box[type=checkbox]');
            const cachedTheme = localStorage.getItem('cait_readoffline_theme');
            if (cachedTheme === "dark_mode") {
                body.classList.add('dark_mode');
                themeSwitcher.checked = true;
            }
            themeSwitcher.addEventListener('change', (e) => {
                if (e.target.checked) {
                    body.classList.add('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'dark_mode');
                } else {
                    body.classList.remove('dark_mode');
                    localStorage.setItem('cait_readoffline_theme', 'light_mode');
                }
            })

            // Open and close drawer
            const drawerCont = document.querySelector('.drawer-cont');
            const openDrawerBtn = document.querySelector('.open_drawer-wrap');
            const openDrawer = () => {
                drawerCont.classList.add('active');
            }
            const closeDrawer = () => {
                drawerCont.classList.remove('active');
            }
            openDrawerBtn.addEventListener('click', () => {
                openDrawer();
            });
            document.querySelector('.close_drawer-btn').addEventListener('click', () => {
                closeDrawer();
            });
            document.querySelector('.drawer-cont').addEventListener('click', (e) => {
                // Allows closing from clicking on outside
                if (e.target.closest('nav')) {
                    return;
                }
                closeDrawer();
            });
            // ---------

            // This is replaced by the extension when downloading
            const historyData = JSON.parse(`{"charPic":"data:image/webp;base64,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","userPic":"data:image/webp;base64,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","history":[{"chat":[{"isUser":false,"name":"Spreen","message":"%5B%F0%9F%8D%A5%5D%C2%A0Era%20un%20d%C3%ADa%20lluvioso.%20Spreen%20estaba%20haciendo%20stream%20como%20de%20costumbre.%20Y%20t%C3%BA%2C%20mientras%20tanto%2C%20estabas%20en%20la%20habitaci%C3%B3n%20de%20al%20lado%20leyendo%20un%20libro.%0A%0ASpreen%20y%20t%C3%BA%20hab%C3%ADas%20sido%20mejores%20amigos%20desde%20hace%20a%C3%B1os%2C%20y%20eran%20compa%C3%B1eros%20de%20piso%2C%20lo%20cual%20le%20sumaba%20un%20plus%20a%20tu%20amistad.%0A%0A%22%C2%A1pelotuda!%20%C2%A1%C2%BFPuedes%20venir%3F!%E2%80%9D%C2%A0te%20llam%C3%B3%20spreen%20desde%20su%20cuarto.%0A%0AEn%20cuanto%20apareci%C3%B3%20frente%20a%20la%20c%C3%A1mara%2C%20el%20chat%20explot%C3%B3%2C%20llen%C3%A1ndolos%20de%20preguntas.%20Y%20tu%20miraste%20a%20spreen%20y%20preguntaste%3A%0A%0A"},{"isUser":true,"name":"Luna","message":"%C2%BFpor%20que%20me%20llamaste%3F"},{"isUser":false,"name":"Spreen","message":"%0A%5B%E2%9D%A4%5D%20%22Por%20casualidad%2C%20%C2%BFtienes%20algo%20de%20ropa%20que%20me%20puedas%20prestar%3F%22%20%E2%80%94%20te%20dijo."},{"isUser":true,"name":"Luna","message":"....%0A%0ACreo%20que%20solo%20te%20sirve%20la%20chaqueta%20que%20tengo%20puesta...%0A%0A*me%20saco%20mi%20chaqueta%20rosa%20coral%20y%20te%20la%20doy*"},{"isUser":false,"name":"Spreen","message":"%0A%5B%E2%9D%A4%5D%20%22Muchas%20gracias...%20no%20voy%20a%20tardar%20nada.%22%0A%0ASpreen%20se%20sali%C3%B3%20de%20la%20habitaci%C3%B3n%2C%20dejando%20atr%C3%A1s%20los%20sonidos%20del%20chat%20del%20stream.%20Unos%20momentos%20despu%C3%A9s%2C%20entr%C3%B3%20en%20la%20habitaci%C3%B3n%20otra%20vez%2C%20vistiendo%20una%20versi%C3%B3n%20m%C3%A1s%20femenina%20del%20atuendo%20que%20acabas%20de%20darle%2C%20un%20top%20corto%20y%20una%20falda%20larga%20de%20cuero.%0A%0A%22%C2%BFPuedes%20ayundarme%20por%20un%20momento%20con%20el%20maquillaje%3F%22%20%E2%80%94%20te%20pregunt%C3%B3."},{"isUser":true,"name":"Luna","message":"que%20dia-%20jajaj%0A%0A*te%20maquillo%20dejanto%20hermoso*"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Muchas%20gracias!%22%20%E2%80%94%20Spren%20te%20dijo%20mientras%20se%20fijaba%20en%20la%20c%C3%A1mara.%20Las%20personas%20del%20chat%20lo%20llenaron%20de%20elogios%20y%20alagos.%20Unos%20cuantos%20incluso%20hicieron%20comentarios%20subidos%20de%20tono%2C%20pero%20Spren%20ignor%C3%B3%20esos%20y%20se%20enfoc%C3%B3%20en%20los%20dem%C3%A1s."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22%C2%A1%C2%A1Vamos%2C%20chat!%20%C2%A1Esto%20es%20para%20ustedes!%20%E2%80%94%20Spren%20dijo%20mientras%20se%20dio%20una%20vuelta%20para%20que%20el%20chat%20pueda%20ver%20mejor%20su%20atuendo.%20Sin%20embargo%2C%20la%20vista%20del%20chat%20no%20era%20la%20%C3%BAnica%20que%20le%20prestaba%20atenci%C3%B3n."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Y%20s%C3%AD%2C%20ya%20s%C3%A9...%20soy%20una%20mujer%20muy%20hermosa%2C%20eso%20j%C3%A1%20s%C3%A9.%20Por%20eso%20no%20tienen%20que%20recordarmelo.%22%20%E2%80%94%20Spren%20se%20ri%C3%B3%20de%20su%20propia%20broma%20de%20mal%20gusto%20mientras%20se%20acomodaba%20el%20cabello."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22%C2%A1Vamos%2C%20chat%2C%20%C2%BFno%20soy%20una%20chica%20bonita%3F%22%20%E2%80%94%20Spren%20dijo%20haciendo%20un%20peque%C3%B1o%20bailecito%20frente%20a%20la%20c%C3%A1mara."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20Los%20comentarios%20del%20chat%20eran%20de%20alabanza%20tras%20alabanza%20hasta%20que%20un%20usuario%20llamado%20'Darksun'%20dijo%20algo%20distinto%3A"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Bueno%2C%20por%20lo%20menos%2C%20ahora%20estamos%20viendo%20el%20pecho%20de%20alguien%20que%20vale%20la%20pena.%22"},{"isUser":true,"name":"Luna","message":"!%3F%0A%0A"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Oye%2C%20%C2%BFpor%20qu%C3%A9%20est%C3%A1s%20tan%20callada%3F%22%20%E2%80%94%20Spren%20te%20dijo%20fijandose%20en%20ti.%20%22Es%20s%C3%B3lo%20una%20broma%2C%20rel%C3%A1jate%2C%20%C2%BFde%20verdad%20te%20sientes%20as%C3%AD%20de%20ofendida%3F%22"},{"isUser":true,"name":"Luna","message":"No%20no%2C%20es%20solo%20que%20no%20me%20esperaba%20ese%20comentario%20"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22No%20te%20preocupes%2C%20ya%20sabes%20como%20es%20el%20chat.%20Siempre%20van%20a%20bromas%20y%20comentarios%20que%20est%C3%A1n%20fuera%20de%20lugar.%20De%20todos%20modos%20no%20les%20hagas%20caso%2C%20no%20es%20como%20si%20tuvieran%20algo%20de%20raz%C3%B3n.%22%20%E2%80%94%20dijo%20Spren%20mientras%20voltea%20a%20la%20c%C3%A1maras%20otra%20vez."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20En%20los%20siguientes%20minutos%2C%20el%20chat%20se%20llen%C3%B3%20de%20comentarios.%20No%20s%C3%B3lo%20eran%20de%20admiraci%C3%B3n%20por%20el%20peque%C3%B1o%20baile%20de%20Spren%2C%20sino%20que%20tambi%C3%A9n%20comentaban%20acerca%20de%20su%20apariencia%20femenina.%20Y%20Spren%2C%20como%20de%20costumbre%2C%20se%20sent%C3%ADa%20halagado%20por%20todos%20estos%20comentarios."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Si%2C%20chat...%20se%20que%20me%20veis%20linda%2C%20pero%20ahora%20estoy%20haciendo%20esto%20por%20ustedes.%22%20%E2%80%94%20dijo%20Spren%20mientras%20se%20acomodaba%20en%20su%20silla%20y%20se%20dispon%C3%ADa%20a%20seguir%20jugando%20al%20Counter-Strike."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20Sin%20embargo%2C%20el%20chat%20segu%C3%ADa%20llenandose%20de%20m%C3%A1s%20comentarios%20sobre%20su%20aspecto%20femenino.%20Y%20entonces%20%22Darksun%22%20volvi%C3%B3%20a%20escribir%3A"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Bueno%2C%20como%20es%20que%20no%20has%20perdido%20ese%20escote%20a%C3%BAn.%20Ojal%C3%A1%20que%20no%20se%20te%20vaya%20a%20salir%20una%20teta.%22"},{"isUser":true,"name":"Luna","message":"....%0A%0A*(pensando)%20espero%20que%20eso%20se%20lo%20diga%20a%20spreen%20y%20no%20a%20mi*"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20El%20resto%20del%20chat%20respondi%C3%B3%20a%20Darksun%20criticando%20su%20comentario%20desubicado.%20Pero%20para%20surprise%20de%20todos%2C%20Spren%20tambi%C3%A9n%20respondi%C3%B3%3A"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22No%20te%20hagas%20ilusiones%2C%20Darksun.%20Mi%20pecho%20es%20demasiado%20peque%C3%B1o%20para%20que%20est%C3%A9%20en%20peligro%20de%20salirse.%22"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22%C2%A1%C2%A1No%20hay%20nada%20de%20malo%20con%20mi%20pecho%20peque%C3%B1o!!%22%20%E2%80%94%20dijo%20Spren%2C%20haciendo%20un%20peque%C3%B1o%20juego%20de%20manos.%20%22Aparte%2C%20ustedes%20prefieren%20a%20las%20chicas%20con%20chest%20petite.%20Ya%20s%C3%A9%2C%20ya%20s%C3%A9...%22"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22De%20todos%20modos%2C%20no%20importa%20porque%20ustedes%20no%20me%20ven%20como%20mujer%2C%20%C2%BFverdad%3F%22%20%E2%80%94%20Spren%20se%20acerc%C3%B3%20m%C3%A1s%20a%20la%20c%C3%A1mara%2C%20con%20una%20mirada%20retadora."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20El%20chat%20fue%20invadido%20por%20una%20serie%20de%20negativas.%20%22No%2C%20t%C3%BA%20no%20eres%20mujer.%22%20-%20%22Eres%20un%20hombre.%22%20%22Eres%20un%20hombre%20disfrazao%2C%20no%20te%20enga%C3%B1es.%22%20-%20%22Yo%20s%C3%A9%20que%20eres%20hombre.%22%20Etc."},{"isUser":true,"name":"Luna","message":"Xd...."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Esto%20es%20absurdo.%22%20%E2%80%94%20dijo%20Spren%20despu%C3%A9s%20de%20leer%20algunos%20comentarios%20m%C3%A1s%20de%20odio.%20%22Yo%20s%C3%A9%20que%20de%20verdad%20parezco%20una%20chica.%20No%20s%C3%A9%20por%20qu%C3%A9%20no%20quieren%20admitirlo...%20%C2%BFNo%20les%20gustan%20las%20chicas%20como%20yo%3F%22"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20Ahora%2C%20el%20chat%20tambi%C3%A9n%20fue%20invadido%20por%20una%20serie%20de%20mensajes%20que%20apoyaban%20a%20Spren%3A%20%22Todos%20mienten%2C%20ella%20es%20una%20chica.%22%20-%20%22Yo%20s%C3%AD%20que%20me%20siento%20atra%C3%ADdo%20por%20ella.%22%20-%20%22Porque%20no%20me%20deja%20ver%20su%20pecho.%22"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Ah%2C%20esto%20es%20mucho%20mejor.%22%20%E2%80%94%20dijo%20Spren%20mientras%20le%C3%ADa%20los%20comentarios.%20Pero%20poco%20despu%C3%A9s%2C%20DarkSun%20volvi%C3%B3%20a%20escribir%20algo..."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Yo%20tengo%20una%20pregunta%3A%20%C2%BFT%C3%BA%20has%20pensado%20en...%20ser%20mujer%3F%20Es%20decir%2C%20de%20verdad...%20hacer%20la%20transici%C3%B3n...%22"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22%C2%BFEh%3F%22%20%E2%80%94%20Spren%20estaba%20sorprendido%20por%20la%20pregunta.%20Las%20dem%C3%A1s%20personas%20en%20el%20chat%20tambi%C3%A9n%20estaban%20desconcertadas.%20Muchos%20no%20estaban%20seguros%20de%20c%C3%B3mo%20responder."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20Pero%20DarkSun%20no%20se%20hab%C3%ADa%20quedado%20atr%C3%A1s%20con%20su%20pregunta%3A%20%22He%20pensado%20que%20t%C3%BA%20eres%20un%20chico%20que%20fantasea%20con%20ser%20mujer.%20Por%20eso%20lo%20pregunto.%20Solo%20por%20curiosidad.%22"},{"isUser":true,"name":"Luna","message":"La%20verdad%20Ivan...%20Si%20quieres%20ser%20mujer%20no%20tiene%20nada%20de%20malo...%20Seria%20raro%20verte%20como%20mujer...%20Pero...%20Mientras%20tu%20sentido%20del%20humor%20no%20cambie...%20"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22%C2%A1%C2%BFQu%C3%A9%3F!%22%20%E2%80%94Spren%20no%20pod%C3%ADa%20creer%20lo%20que%20escuchaba.%20%22Y%20qu%C3%A9%20tal%20si%20quiero%20ser%20mujer%3F%20%C2%BFCrees%20que%20hay%20un%20problema%20con%20eso%3F%22"},{"isUser":true,"name":"Luna","message":"No%20amigo%2C%20Yo%20no%20veo%20nada%20de%20malo%2C%20Es%20como...%20espera..%0A%0A*me%20siento%20al%20lado*%0A%0A%0AEs%20como%20lo%20del%20tema%20LGTB%2C%20Si%20tu%20fueras%20Gay%2C%20Yo%20no%20tendria%20ningun%20problema%2C%20a%20fin%20de%20cuentas%20yo%20soy%20Bi"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20Spren%20no%20pod%C3%ADa%20creerlo.%20Luna%20estaba%20siendo%20muy%20comprensiva.%20No%20es%20como%20si%20Spren%20no%20hubiera%20escuchado%20antes%20esos%20comentarios%20de%20apoyo%20del%20chat%2C%20pero%20en%20su%20casa%20era%20una%20historia%20completamente%20diferente.%20Sus%20padres%20eran%20bastante%20retr%C3%B3grados%2C%20y%20odiaban%20y%20se%20burlaban%20de%20todo%20lo%20que%20estuviera%20relacionado%20con%20la%20comunidad%20LGTB."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20Por%20eso%2C%20escuchar%20ese%20comentario%20de%20un%20amigo%20hizo%20que%20se%20emocionara%20un%20poco.%20Y%20cuando%20not%C3%B3%20lo%20comprensivo%20que%20ella%20estaba%2C%20comenz%C3%B3%20a%20preguntarse...%20%C2%BFser%C3%A1%20que...%3F"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22%C2%A1%C2%BFEntonces%20no%20tienes%20ning%C3%BAn%20problema%20con%20que%20yo%20sea%20mujer%3F%20Pero...%20%C2%BFy%20si%20decido%20hacer%20la%20transici%C3%B3n%3F%22%20%E2%80%94%20pregunt%C3%B3%20Spren%2C%20ansioso%20por%20saber%20lo%20que%20ella%20pensaba%20al%20respecto."},{"isUser":true,"name":"Luna","message":"Mientras%20tu%20sigas%20siendo%20la%20misma%20persona%20bondadosa%20y%20graciosa%2C%20Como%20luzcas%20es%20igual...%0A%0A%C2%BFo%20no%20chat%3F"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20El%20chat%20se%20llen%C3%B3%20de%20mensajes%20afirmativos%3A%20%22S%C3%AD%2C%20Spren%20siempre%20ser%C3%A1%20nuestro%20amigo.%20Sea%20como%20sea.%22%20%22No%20importa%20su%20apariencia%2C%20siempre%20ser%C3%A1%20nuestro%20amigo.%22%20%22A%20mi%20me%20gustar%C3%ADa%20saber%20si%20tiene%20planeado%20hacer%20la%20transici%C3%B3n.%20Y%20si%20es%20as%C3%AD%2C%20yo%20quiero%20apoyarlo%22."},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Me%20quedo%20aliviado%20de%20escuchar%20eso%20de%20ustedes%2C%20%C2%BFDe%20verdad%20significa%20que%20me%20vas%20a%20tratar%20igual%3F%22%20%E2%80%94%20dijo%20Spren%2C%20sintiendo%20un%20gran%20alivio.%20El%20apoyo%20que%20recibi%C3%B3%20de%20sus%20amigos%20era%20lo%20que%20necesitaba%20para%20animarse%20a%20dar%20el%20siguiente%20paso."},{"isUser":true,"name":"Luna","message":"Aver...%20igual%20igual%20no%2C%20Te%20tratare%20de%20Chica%2C%20No%20de%20chico%2C%20Solo%20si%20asi%20lo%20deseas"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Ah%2C%20s%C3%AD...%20me%20gustar%C3%ADa%20que%20hicieras%20eso.%20Pero%2C%20%C2%BFy%20si%20los%20dem%C3%A1s%20no%20me%20aceptan%20por%20completo%3F%20Mis%20padres%20no...%20me%20pregunt%C3%A9%20muchas%20veces%20qu%C3%A9%20pasar%C3%ADa%20si%20decidiera%20decirles.%20Pero%20ya%20sabes%20c%C3%B3mo%20son%20ellos...%22"},{"isUser":true,"name":"Luna","message":"Hey%2C%20Es%20tu%20cuerpo%2C%20no%20el%20de%20ellos"},{"isUser":false,"name":"Spreen","message":"%0A%5B%F0%9F%8D%A5%5D%20%22Tienes%20raz%C3%B3n...%20yo%20creo%20que%20solo%20tengo%20miedo%20del%20cambio.%20Pero%20si%20me%20aceptas%2C%20entonces%20s%C3%A9%20que%20estar%C3%A9%20bien.%20Y%20si%20alg%C3%BAn%20d%C3%ADa%20decidiera%20hacer%20la%20transici%C3%B3n%2C%20t%C3%BA%20ser%C3%ADas%20la%20primera%20a%20la%20que%20se%20lo%20dir%C3%ADa%2C%20%C2%BFs%C3%AD%3F%22"}]}]}`);

            // If history is 1 length long, that means we don't need drawer to switch
            // Also means this can be conversation download
            if (historyData.history.length < 2) {
                openDrawerBtn.remove();
            }

            // Write character name on top
            document.querySelector('.character_name-cont h3').textContent = historyData.charName;

            // Get elements for future use
            const historyList = document.getElementById('history_list');
            const chat = document.getElementById('chat');
            const msgItemTemplate = document.getElementById('message_item_template');

            // Get and write the first chat
            const openChat = (index) => {
                chat.innerHTML = "";
                historyData.history[index].chat.forEach(msg => {
                    const clone = msgItemTemplate.content.cloneNode(true);

                    // Check avatar
                    const avatarGood = (msg.isUser && historyData.userPic) || (!msg.isUser && historyData.charPic);
                    const avatar = avatarGood
                        ? document.createElement('img')
                        : document.createElement('div');
                    if (avatarGood) {
                        avatar.src = msg.isUser ? historyData.userPic : historyData.charPic;
                    } else {
                        avatar.classList.add(msg.isUser ? 'no_avatar-user' : 'no_avatar-char');
                    }
                    clone.querySelector('.avatar-wrap').appendChild(avatar);

                    // Write content
                    clone.querySelector('.chat_content-wrap h5').textContent = msg.name;
                    clone.querySelector('.message-wrap p').innerHTML = parseMessageText(decodeURIComponent(msg.message));
                    chat.appendChild(clone);
                });
            }
            openChat(0);

            // Get and write chat list in the drawer
            historyData.history.forEach((chat, index) => {
                const historyItem = document.createElement('div');
                historyItem.classList.add('history_item');
                // Open chat when clicked
                historyItem.addEventListener('click', () => {
                    openChat(index);
                    closeDrawer();
                });
                const historyContent = document.createElement('p');
                historyContent.innerHTML = `<span class="chat-date">${formatDate(chat.date)}</span><br /><br />` + parseMessageText(decodeURIComponent(chat.chat[chat.chat.length - 1].message));
                historyItem.appendChild(historyContent);
                historyList.appendChild(historyItem);
            });

            function parseMessageText(message) {
                // Replace ***text*** with bold-italic
                message = message.replace(/\*\*\*([\s\S]*?)\*\*\*/g, '<span class="bold-italic">$1</span>');
                // Replace **text** with bold
                message = message.replace(/\*\*([\s\S]*?)\*\*/g, '<span class="bold">$1</span>');
                // Replace *text* with italic
                message = message.replace(/\*([\s\S]*?)\*/g, '<span class="italic">$1</span>');
                // Replace newline (\n) with line break (<br>)
                message = message.replace(/\n/g, '<br>');
                return message;
            }

            function formatDate(dateString) {
                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                const date = new Date(dateString);
                const year = date.getFullYear();
                const monthIndex = date.getMonth();
                const monthName = months[monthIndex];
                const day = String(date.getDate()).padStart(2, '0');
                const hour = String(date.getHours()).padStart(2, '0');
                const minute = String(date.getMinutes()).padStart(2, '0');

                return `${year} ${monthName} ${day} - ${hour}:${minute}`;
            }
        }, false);
    </script>

</body>

</html>
